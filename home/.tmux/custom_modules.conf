# Custom catppuccin modules - hardcoded names for reliability

# Memory
set -ogq "@catppuccin_memory_icon" "MEM "
set -ogqF "@catppuccin_memory_color" "#{E:@thm_blue}"
set -ogq "@catppuccin_memory_text" "#(free | awk '/Mem:/ {printf \"%.0f%%\", \$3/\$2*100}')"
set -ogqF "@catppuccin_status_memory_icon_fg" "#{E:@thm_crust}"
set -ogqF "@catppuccin_status_memory_icon_bg" "#{@catppuccin_memory_color}"
set -ogqF "@catppuccin_status_memory_text_fg" "#{E:@thm_fg}"
set -gF "@catppuccin_status_memory" "#[fg=#{@catppuccin_status_memory_icon_bg}]#{@catppuccin_status_left_separator}#[fg=#{@catppuccin_status_memory_icon_fg},bg=#{@catppuccin_status_memory_icon_bg}]#{@catppuccin_memory_icon}#{@catppuccin_status_middle_separator}#[fg=#{@catppuccin_status_memory_text_fg},bg=#{E:@catppuccin_status_module_text_bg}]"
set -ag "@catppuccin_status_memory" "#{E:@catppuccin_memory_text}"
set -agF "@catppuccin_status_memory" "#[fg=#{E:@catppuccin_status_module_text_bg}]#{@catppuccin_status_right_separator}"

# GPU Load
set -ogq "@catppuccin_gpu_load_icon" "GPU "
set -ogqF "@catppuccin_gpu_load_color" "#{E:@thm_green}"
set -ogq "@catppuccin_gpu_load_text" "#(nvidia-smi --query-gpu=utilization.gpu --format=csv,noheader,nounits 2>/dev/null | head -1 | awk '{print \$1\"%\"}')"
set -ogqF "@catppuccin_status_gpu_load_icon_fg" "#{E:@thm_crust}"
set -ogqF "@catppuccin_status_gpu_load_icon_bg" "#{@catppuccin_gpu_load_color}"
set -ogqF "@catppuccin_status_gpu_load_text_fg" "#{E:@thm_fg}"
set -gF "@catppuccin_status_gpu_load" "#[fg=#{@catppuccin_status_gpu_load_icon_bg}]#{@catppuccin_status_left_separator}#[fg=#{@catppuccin_status_gpu_load_icon_fg},bg=#{@catppuccin_status_gpu_load_icon_bg}]#{@catppuccin_gpu_load_icon}#{@catppuccin_status_middle_separator}#[fg=#{@catppuccin_status_gpu_load_text_fg},bg=#{E:@catppuccin_status_module_text_bg}]"
set -ag "@catppuccin_status_gpu_load" "#{E:@catppuccin_gpu_load_text}"
set -agF "@catppuccin_status_gpu_load" "#[fg=#{E:@catppuccin_status_module_text_bg}]#{@catppuccin_status_right_separator}"

# VRAM
set -ogq "@catppuccin_vram_icon" "VRAM "
set -ogqF "@catppuccin_vram_color" "#{E:@thm_mauve}"
set -ogq "@catppuccin_vram_text" "#(nvidia-smi --query-gpu=memory.used,memory.total --format=csv,noheader,nounits 2>/dev/null | head -1 | awk -F', ' '{printf \"%.0f%%\", \$1/\$2*100}')"
set -ogqF "@catppuccin_status_vram_icon_fg" "#{E:@thm_crust}"
set -ogqF "@catppuccin_status_vram_icon_bg" "#{@catppuccin_vram_color}"
set -ogqF "@catppuccin_status_vram_text_fg" "#{E:@thm_fg}"
set -gF "@catppuccin_status_vram" "#[fg=#{@catppuccin_status_vram_icon_bg}]#{@catppuccin_status_left_separator}#[fg=#{@catppuccin_status_vram_icon_fg},bg=#{@catppuccin_status_vram_icon_bg}]#{@catppuccin_vram_icon}#{@catppuccin_status_middle_separator}#[fg=#{@catppuccin_status_vram_text_fg},bg=#{E:@catppuccin_status_module_text_bg}]"
set -ag "@catppuccin_status_vram" "#{E:@catppuccin_vram_text}"
set -agF "@catppuccin_status_vram" "#[fg=#{E:@catppuccin_status_module_text_bg}]#{@catppuccin_status_right_separator}"

# Time
set -ogq "@catppuccin_time_icon" " "
set -ogqF "@catppuccin_time_color" "#{E:@thm_flamingo}"
set -ogq "@catppuccin_time_text" "%H:%M"
set -ogqF "@catppuccin_status_time_icon_fg" "#{E:@thm_crust}"
set -ogqF "@catppuccin_status_time_icon_bg" "#{@catppuccin_time_color}"
set -ogqF "@catppuccin_status_time_text_fg" "#{E:@thm_fg}"
set -gF "@catppuccin_status_time" "#[fg=#{@catppuccin_status_time_icon_bg}]#{@catppuccin_status_left_separator}#[fg=#{@catppuccin_status_time_icon_fg},bg=#{@catppuccin_status_time_icon_bg}]#{@catppuccin_time_icon}#{@catppuccin_status_middle_separator}#[fg=#{@catppuccin_status_time_text_fg},bg=#{E:@catppuccin_status_module_text_bg}]"
set -ag "@catppuccin_status_time" "#{E:@catppuccin_time_text}"
set -agF "@catppuccin_status_time" "#[fg=#{E:@catppuccin_status_module_text_bg}]#{@catppuccin_status_right_separator}"
